import{c as F,r as b,ae as Q,af as k,o as I,h as j,d as A,g as D,ag as R,E as P,f as N,ah as U,N as z,ai as L,u as M,$ as q,a0 as O,a1 as v,_ as $,a2 as c,aj as B,ak as K,al as w,a9 as T,aa as G,a6 as H,a4 as J,am as W,an as X}from"./index.2160a12d.js";import{Q as Y}from"./QPage.293da3ae.js";import{api as Z}from"./axios.3546731f.js";var ee=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:y,emit:f}){const m=D(),o=b(null);let l=0;const a=[];function d(e){const i=typeof e=="boolean"?e:u.noErrorFocus!==!0,g=++l,_=(t,n)=>{f("validation"+(t===!0?"Success":"Error"),n)},V=t=>{const n=t.validate();return typeof n.then=="function"?n.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:n,comp:t})};return(u.greedy===!0?Promise.all(a.map(V)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>V(n).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return g===l&&_(!0),!0;if(g===l){const{comp:n,err:r}=t[0];if(r!==void 0&&console.error(r),_(!1,n),i===!0){const C=t.find(({comp:E})=>typeof E.focus=="function"&&R(E.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function s(){l++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&P(e);const i=l+1;d().then(g=>{i===l&&g===!0&&(u.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&P(e),f("reset"),N(()=>{s(),u.autofocus===!0&&u.noResetFocus!==!0&&p()})}function p(){U(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),i=>i.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}z(L,{bindComponent(e){a.push(e)},unbindComponent(e){const i=a.indexOf(e);i>-1&&a.splice(i,1)}});let S=!1;return Q(()=>{S=!0}),k(()=>{S===!0&&u.autofocus===!0&&p()}),I(()=>{u.autofocus===!0&&p()}),Object.assign(m.proxy,{validate:d,resetValidation:s,submit:x,reset:h,focus:p,getValidationComponents:()=>a}),()=>j("form",{class:"q-form",ref:o,onSubmit:x,onReset:h},A(y.default))}});const te=X("h4",{class:"text-center text-primary q-my-md"},"Login",-1),ae={key:0,class:"text-center text-red q-mt-md"},ue={__name:"LoginPage",setup(u){const y=M(),f=$(),m=b(""),o=b({email:"admin@gmail.com",password:"123123"});function l(){Z.post("/login",o.value).then(a=>{console.log(a.data),y.saveUser(a.data.token),f.push("/")}).catch(a=>{console.log(a.response),m.value=a.response.data.mensaje})}return(a,d)=>(q(),O(Y,{class:"q-mx-xl q-mt-xl"},{default:v(()=>[c(W,null,{default:v(()=>[te,c(B,null,{default:v(()=>[c(ee,{onSubmit:K(l,["prevent"])},{default:v(()=>[c(w,{modelValue:o.value.email,"onUpdate:modelValue":d[0]||(d[0]=s=>o.value.email=s),type:"email",label:"Email",rules:[s=>s.length>3||"Debe ingresar un correo"],"lazy-rules":"ondemand"},null,8,["modelValue","rules"]),c(w,{modelValue:o.value.password,"onUpdate:modelValue":d[1]||(d[1]=s=>o.value.password=s),type:"password",label:"Password",rules:[s=>s.length>3||"Debe ingresar un password"],"lazy-rules":"ondemand"},null,8,["modelValue","rules"]),c(B,{class:"text-center"},{default:v(()=>[c(T,{label:"Ingresar",type:"submit",color:"primary"}),m.value!==""?(q(),G("p",ae,H(m.value),1)):J("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{ue as default};
